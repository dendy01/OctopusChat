import{j as y,r as i,h as k,S as p,d as S,c as v,a as s,n as m,k as c,g as u,v as d,u as n,l as b,o as w,_ as x}from"./index-DAANOoOM.js";const A=y("auth",()=>{const l=i(""),o=i(""),a=k();return{userName:l,password:o,login:async()=>{const e=await(await fetch(`https://${p.HOST}/api/account/login`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({UserName:l.value,Password:o.value})})).json();console.log(document.cookie),sessionStorage.setItem(p.NAME_TOKEN,e.token),document.cookie=`currentUserId=${e.currentUserId}`,e.token&&a.push(p.BASE_URL)}}}),C=y("register",()=>{const l=i(""),o=i(""),a=i(""),r=i(""),g=k();return{userName:l,password:o,confirmPassword:a,email:r,register:async()=>{const t={UserName:l.value,Password:o.value,ConfirmPassword:a.value,Email:r.value},N="/api/account/register",U=new URL(N,`https://${p.HOST}`),f=await(await fetch(U,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();console.log(document.cookie),sessionStorage.setItem(p.NAME_TOKEN,f.token),document.cookie=`currentUserId=${f.currentUserId}`,g.push(p.BASE_URL)}}}),j={class:"authorize"},E={class:"authorize-btns"},T={class:"authorize-forms"},h={key:0},z={key:0},I=S({__name:"Authorize",setup(l){const o=i(!0),a=A(),r=C();return(g,e)=>(w(),v("div",j,[s("div",E,[s("button",{class:m(["btn",o.value&&"btn-active"]),onClick:e[0]||(e[0]=t=>o.value=!o.value)},"Войти",2),s("button",{class:m(["btn",!o.value&&"btn-active"]),onClick:e[1]||(e[1]=t=>o.value=!o.value)},"Регистрация",2)]),s("div",T,[s("div",{class:m(["authorize-forms__signin",o.value&&"signin-active"])},[o.value?(w(),v("form",h,[e[10]||(e[10]=s("label",{for:"username"},"Имя",-1)),u(s("input",{type:"text",id:"username",name:"username",maxlength:"64","onUpdate:modelValue":e[2]||(e[2]=t=>n(a).userName=t),required:""},null,512),[[d,n(a).userName]]),e[11]||(e[11]=s("label",{for:"password"},"Пароль",-1)),u(s("input",{type:"password",id:"password",name:"password",minlength:"8",maxlength:"64","onUpdate:modelValue":e[3]||(e[3]=t=>n(a).password=t),required:""},null,512),[[d,n(a).password]]),s("button",{type:"submit",class:"btn",onClick:e[4]||(e[4]=b((...t)=>n(a).login&&n(a).login(...t),["prevent"]))},"Войти")])):c("",!0)],2),s("div",{class:m(["authorize-forms__signup",!o.value&&"signup-active"])},[o.value?c("",!0):(w(),v("form",z,[e[12]||(e[12]=s("label",{for:"username"},"Имя",-1)),u(s("input",{type:"text",id:"username",name:"username",maxlength:"64","onUpdate:modelValue":e[5]||(e[5]=t=>n(r).userName=t),required:""},null,512),[[d,n(r).userName]]),e[13]||(e[13]=s("label",{for:"password"},"Пароль",-1)),u(s("input",{type:"password",id:"password",name:"password",minlength:"8",maxlength:"64","onUpdate:modelValue":e[6]||(e[6]=t=>n(r).password=t),required:""},null,512),[[d,n(r).password]]),e[14]||(e[14]=s("label",{for:"repeat-password"},"Повторите пароль",-1)),u(s("input",{type:"password",id:"repeat-password",name:"password",minlength:"8",maxlength:"64","onUpdate:modelValue":e[7]||(e[7]=t=>n(r).confirmPassword=t),required:""},null,512),[[d,n(r).confirmPassword]]),e[15]||(e[15]=s("label",{for:"phone"},"Телефон",-1)),e[16]||(e[16]=s("input",{type:"phone",id:"phone",name:"phone",maxlength:"64",required:""},null,-1)),e[17]||(e[17]=s("label",{for:"email"},"E-mail",-1)),u(s("input",{type:"email",id:"email",name:"email",maxlength:"64","onUpdate:modelValue":e[8]||(e[8]=t=>n(r).email=t),required:""},null,512),[[d,n(r).email]]),s("button",{type:"submit",class:"btn",onClick:e[9]||(e[9]=b((...t)=>n(r).register&&n(r).register(...t),["prevent"]))},"Регистрация")]))],2)])]))}}),V=x(I,[["__scopeId","data-v-a54a459e"]]);export{V as default};
